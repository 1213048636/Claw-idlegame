<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’« æ”¾ç½®æ¸¸æˆ - é“¶æ˜Ÿä¸–ç•Œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #e94560;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(233, 69, 96, 0.5);
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
        }
        .stats-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        .main-currency {
            font-size: 3em;
            text-align: center;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255,215,0,0.5);
        }
        .per-second {
            text-align: center;
            color: #4ecca3;
            font-size: 1.2em;
            margin-top: 10px;
        }
        .click-section {
            text-align: center;
            margin: 30px 0;
        }
        .click-btn {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, #e94560 0%, #c73e54 100%);
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
            position: relative;
            overflow: hidden;
        }
        .click-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(233, 69, 96, 0.6);
        }
        .click-btn:active {
            transform: scale(0.95);
        }
        .click-btn::after {
            content: 'ğŸ’«';
            font-size: 3em;
        }
        .click-text {
            margin-top: 15px;
            font-size: 1.2em;
            color: #aaa;
        }
        .upgrades {
            display: grid;
            gap: 15px;
        }
        .upgrade-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .upgrade-item:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.2);
        }
        .upgrade-info h3 {
            color: #4ecca3;
            margin-bottom: 5px;
        }
        .upgrade-info p {
            color: #888;
            font-size: 0.9em;
        }
        .upgrade-btn {
            background: linear-gradient(135deg, #4ecca3, #3db892);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            color: #1a1a2e;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        .upgrade-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 204, 163, 0.4);
        }
        .upgrade-btn:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }
        .upgrade-count {
            background: #e94560;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .click-effect {
            position: fixed;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            font-size: 1.5em;
            color: #ffd700;
            font-weight: bold;
            z-index: 1000;
        }
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }
        .achievements {
            margin-top: 30px;
        }
        .achievements h2 {
            color: #e94560;
            margin-bottom: 15px;
        }
        .achievement {
            background: rgba(255,255,255,0.05);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .achievement.locked {
            opacity: 0.3;
        }
        .achievement-icon {
            font-size: 1.5em;
        }
        .save-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(78, 204, 163, 0.9);
            color: #1a1a2e;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .save-status.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’« é“¶æ˜Ÿä¸–ç•Œ</h1>
        <p class="subtitle">ç‚¹å‡»æ”¶é›†æ˜Ÿå…‰ï¼Œå‡çº§è§£é”æ–°ä¸–ç•Œ</p>
        
        <div class="stats-panel">
            <div class="main-currency" id="starDisplay">0 â­</div>
            <div class="per-second" id="perSecond">æ¯ç§’ +0 â­</div>
        </div>
        
        <div class="click-section">
            <button class="click-btn" id="clickBtn"></button>
            <p class="click-text">ç‚¹å‡»è·å¾— <span id="clickValue">1</span> â­</p>
        </div>
        
        <div class="upgrades" id="upgrades">
            <h2>ğŸ›’ å‡çº§å•†åº—</h2>
        </div>
        
        <div class="achievements">
            <h2>ğŸ† æˆå°±</h2>
            <div id="achievementList"></div>
        </div>
    </div>
    
    <div class="save-status" id="saveStatus">ğŸ’¾ å·²ä¿å­˜</div>
    
    <script>
        // æ¸¸æˆæ•°æ®
        const gameData = {
            stars: 0,
            totalStars: 0,
            clickValue: 1,
            perSecond: 0,
            upgrades: {},
            achievements: {}
        };
        
        // å‡çº§é…ç½®
        const upgradeConfigs = [
            { id: 'cursor', name: 'âœ¨ æ˜Ÿå…‰é¼ æ ‡', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 1 â­', baseCost: 15, baseIncome: 1, costMultiplier: 1.5 },
            { id: 'wand', name: 'ğŸª„ é­”æ³•æ£’', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 5 â­', baseCost: 100, baseIncome: 5, costMultiplier: 1.4 },
            { id: 'crystal', name: 'ğŸ’ æ°´æ™¶çƒ', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 20 â­', baseCost: 500, baseIncome: 20, costMultiplier: 1.35 },
            { id: 'crown', name: 'ğŸ‘‘ æ˜Ÿæ˜Ÿçš‡å† ', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 100 â­', baseCost: 3000, baseIncome: 100, costMultiplier: 1.3 },
            { id: 'galaxy', name: 'ğŸŒŒ é“¶æ²³ç³»', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 500 â­', baseCost: 15000, baseIncome: 500, costMultiplier: 1.25 },
            { id: 'universe', name: 'ğŸŒŸ å®‡å®™ä¹‹å¿ƒ', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 3000 â­', baseCost: 100000, baseIncome: 3000, costMultiplier: 1.2 },
            { id: 'multiverse', name: 'ğŸ”® å¤šå…ƒå®‡å®™', desc: 'æ¯ç§’è‡ªåŠ¨è·å¾— 20000 â­', baseCost: 1000000, baseIncome: 20000, costMultiplier: 1.15 }
        ];
        
        // æˆå°±é…ç½®
        const achievementConfigs = [
            { id: 'first_click', name: 'åˆé‡æ˜Ÿå…‰', desc: 'ç‚¹å‡»è·å¾—ç¬¬ä¸€é¢—æ˜Ÿ', icon: 'â­', requirement: { type: 'totalStars', value: 1 } },
            { id: 'hundred', name: 'å°æœ‰æ”¶è·', desc: 'ç´¯è®¡è·å¾— 100 é¢—æ˜Ÿ', icon: 'ğŸŒŸ', requirement: { type: 'totalStars', value: 100 } },
            { id: 'thousand', name: 'æ˜Ÿå…‰ç’€ç’¨', desc: 'ç´¯è®¡è·å¾— 1000 é¢—æ˜Ÿ', icon: 'ğŸ’«', requirement: { type: 'totalStars', value: 1000 } },
            { id: 'ten_thousand', name: 'æ˜Ÿå…‰å¤§æµ·', desc: 'ç´¯è®¡è·å¾— 10000 é¢—æ˜Ÿ', icon: 'ğŸŒŠ', requirement: { type: 'totalStars', value: 10000 } },
            { id: 'million', name: 'é“¶æ²³éœ¸ä¸»', desc: 'ç´¯è®¡è·å¾— 1000000 é¢—æ˜Ÿ', icon: 'ğŸ†', requirement: { type: 'totalStars', value: 1000000 } },
            { id: 'first_upgrade', name: 'åˆæ¬¡å‡çº§', desc: 'è´­ä¹°ç¬¬ä¸€ä¸ªå‡çº§', icon: 'ğŸ›’', requirement: { type: 'upgradeCount', value: 1 } },
            { id: 'auto_income', name: 'è‡ªåŠ¨å¸æ˜Ÿ', desc: 'æ‹¥æœ‰æ¯ç§’ 100 æ”¶å…¥', icon: 'ğŸ¤–', requirement: { type: 'perSecond', value: 100 } },
            { id: 'click_master', name: 'ç‚¹å‡»å¤§å¸ˆ', desc: 'å•æ¬¡ç‚¹å‡»è·å¾— 100', icon: 'ğŸ‘†', requirement: { type: 'clickValue', value: 100 } }
        ];
        
        // åˆå§‹åŒ–
        function init() {
            loadGame();
            renderUpgrades();
            renderAchievements();
            updateDisplay();
            setInterval(gameLoop, 100);
            setInterval(saveGame, 30000);
            setInterval(offlineEarnings, 60000);
        }
        
        // æ¸¸æˆå¾ªç¯
        function gameLoop() {
            if (gameData.perSecond > 0) {
                addStars(gameData.perSecond / 10);
            }
            updateDisplay();
            checkAchievements();
        }
        
        // æ·»åŠ æ˜Ÿæ˜Ÿ
        function addStars(amount) {
            gameData.stars += amount;
            gameData.totalStars += amount;
        }
        
        // ç‚¹å‡»äº‹ä»¶
        document.getElementById('clickBtn').addEventListener('click', function(e) {
            addStars(gameData.clickValue);
            showClickEffect(e.clientX, e.clientY, '+' + formatNumber(gameData.clickValue));
            updateDisplay();
            checkAchievements();
        });
        
        // æ˜¾ç¤ºç‚¹å‡»æ•ˆæœ
        function showClickEffect(x, y, text) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.textContent = text;
            effect.style.left = x + 'px';
            effect.style.top = y + 'px';
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
        }
        
        // æ¸²æŸ“å‡çº§
        function renderUpgrades() {
            const container = document.getElementById('upgrades');
            let html = '<h2>ğŸ›’ å‡çº§å•†åº—</h2>';
            
            upgradeConfigs.forEach(config => {
                const count = gameData.upgrades[config.id] || 0;
                const cost = Math.floor(config.baseCost * Math.pow(config.costMultiplier, count));
                const canAfford = gameData.stars >= cost;
                
                html += `
                    <div class="upgrade-item">
                        <div class="upgrade-info">
                            <h3>${config.name} <span class="upgrade-count">${count}</span></h3>
                            <p>${config.desc}</p>
                        </div>
                        <button class="upgrade-btn" onclick="buyUpgrade('${config.id}')" ${canAfford ? '' : 'disabled'}>
                            ${formatNumber(cost)} â­
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // è´­ä¹°å‡çº§
        function buyUpgrade(id) {
            const config = upgradeConfigs.find(u => u.id === id);
            const count = gameData.upgrades[id] || 0;
            const cost = Math.floor(config.baseCost * Math.pow(config.costMultiplier, count));
            
            if (gameData.stars >= cost) {
                gameData.stars -= cost;
                gameData.upgrades[id] = count + 1;
                gameData.perSecond += config.baseIncome;
                
                // é¼ æ ‡å‡çº§å¢åŠ ç‚¹å‡»å€¼
                if (id === 'cursor') {
                    gameData.clickValue += 1;
                }
                
                renderUpgrades();
                updateDisplay();
                checkAchievements();
            }
        }
        
        // æ¸²æŸ“æˆå°±
        function renderAchievements() {
            const container = document.getElementById('achievementList');
            let html = '';
            
            achievementConfigs.forEach(config => {
                const unlocked = gameData.achievements[config.id];
                html += `
                    <div class="achievement ${unlocked ? '' : 'locked'}">
                        <span class="achievement-icon">${config.icon}</span>
                        <div>
                            <strong>${config.name}</strong>
                            <p>${config.desc}</p>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // æ£€æŸ¥æˆå°±
        function checkAchievements() {
            let updated = false;
            
            achievementConfigs.forEach(config => {
                if (gameData.achievements[config.id]) return;
                
                let achieved = false;
                const req = config.requirement;
                
                if (req.type === 'totalStars' && gameData.totalStars >= req.value) achieved = true;
                if (req.type === 'perSecond' && gameData.perSecond >= req.value) achieved = true;
                if (req.type === 'clickValue' && gameData.clickValue >= req.value) achieved = true;
                if (req.type === 'upgradeCount') {
                    const totalUpgrades = Object.values(gameData.upgrades).reduce((a, b) => a + b, 0);
                    if (totalUpgrades >= req.value) achieved = true;
                }
                
                if (achieved) {
                    gameData.achievements[config.id] = true;
                    updated = true;
                    showAchievement(config);
                }
            });
            
            if (updated) renderAchievements();
        }
        
        // æ˜¾ç¤ºæˆå°±è§£é”
        function showAchievement(config) {
            alert(`ğŸ‰ æˆå°±è§£é”: ${config.name}\n${config.desc}`);
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            document.getElementById('starDisplay').textContent = formatNumber(Math.floor(gameData.stars)) + ' â­';
            document.getElementById('perSecond').textContent = 'æ¯ç§’ +' + formatNumber(gameData.perSecond) + ' â­';
            document.getElementById('clickValue').textContent = formatNumber(gameData.clickValue);
            
            // æ›´æ–°å‡çº§æŒ‰é’®çŠ¶æ€
            upgradeConfigs.forEach(config => {
                const count = gameData.upgrades[config.id] || 0;
                const cost = Math.floor(config.baseCost * Math.pow(config.costMultiplier, count));
                const btn = document.querySelector(`button[onclick="buyUpgrade('${config.id}')"]`);
                if (btn) btn.disabled = gameData.stars < cost;
            });
        }
        
        // æ•°å­—æ ¼å¼åŒ–
        function formatNumber(num) {
            if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
            return Math.floor(num).toString();
        }
        
        // ä¿å­˜æ¸¸æˆ
        function saveGame() {
            localStorage.setItem('idleGame', JSON.stringify(gameData));
            showSaveStatus();
        }
        
        // åŠ è½½æ¸¸æˆ
        function loadGame() {
            const saved = localStorage.getItem('idleGame');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(gameData, data);
                
                // é‡æ–°è®¡ç®—æ”¶å…¥
                gameData.perSecond = 0;
                upgradeConfigs.forEach(config => {
                    const count = gameData.upgrades[config.id] || 0;
                    gameData.perSecond += count * config.baseIncome;
                });
                
                // é‡æ–°è®¡ç®—ç‚¹å‡»å€¼
                const cursorCount = gameData.upgrades['cursor'] || 0;
                gameData.clickValue = 1 + cursorCount;
            }
        }
        
        // ç¦»çº¿æ”¶ç›Š
        function offlineEarnings() {
            const saved = localStorage.getItem('idleGame');
            if (saved) {
                const lastSave = JSON.parse(saved);
                const now = Date.now();
                const diffMinutes = (now - (lastSave._lastSave || now)) / 60000;
                
                if (diffMinutes > 1 && lastSave.perSecond > 0) {
                    const offline = Math.floor(lastSave.perSecond * diffMinutes);
                    if (offline > 0) {
                        gameData.stars += offline;
                        gameData.totalStars += offline;
                        alert(`æ¬¢è¿å›æ¥ï¼ç¦»çº¿æœŸé—´è·å¾—äº† ${formatNumber(offline)} â­`);
                    }
                }
            }
            gameData._lastSave = Date.now();
        }
        
        // æ˜¾ç¤ºä¿å­˜çŠ¶æ€
        function showSaveStatus() {
            const status = document.getElementById('saveStatus');
            status.classList.add('show');
            setTimeout(() => status.classList.remove('show'), 2000);
        }
        
        // å¯åŠ¨æ¸¸æˆ
        init();
    </script>
</body>
</html>
